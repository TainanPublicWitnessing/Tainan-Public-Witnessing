(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{Wefv:function(n,l,e){"use strict";e.r(l);var t=e("8Y7J"),i=e("p+/S"),u=e("Ouoq");class s{constructor(n,l,e,t){this.activatedRoute=n,this.router=l,this.shiftService=e,this.userService=t,this.date="",this.shift_title="",this.site="",this.origin_members=[],this.members=[],this.member_names=[],this.member_select_options=[]}ngOnInit(){this.date=this.activatedRoute.snapshot.paramMap.get("date"),this.shift_title=this.activatedRoute.snapshot.paramMap.get("shift_title"),this.site=this.activatedRoute.snapshot.paramMap.get("site"),this.shiftService.getSingleShift(this.date,this.shift_title,this.site).subscribe(n=>{this.members=n.members,this.origin_members=[...this.members]}),this.userService.getAllUsersName().subscribe(n=>{this.member_names=n.sort()})}trackByIndex(n,l){return n}onSelectChange(n){this.members[n]=this.members[n].trim(),this.member_select_options[n]=this.member_names.filter(function(n){return n.includes(this)},this.members[n]),setTimeout(()=>{this.member_select_options[n].unshift("")},250)}edit(){let n=!0;for(let l of this.members)n=n&&(this.member_names.includes(l)||""==l);if(n){for(let n=0;n<4;n++)this.members[n]!=this.origin_members[n]&&(""!=this.origin_members[n]&&this.userService.deletePersonalShift(this.origin_members[n],this.date),""!=this.members[n]&&this.userService.addPersonalShift(this.members[n],this.date,this.shift_title,this.site),this.origin_members=[...this.members],this.shiftService.setShiftByDate(this.date,this.shift_title,this.site,this.members));alert("\u4fee\u6539\u6210\u529f"),this.router.navigate(["home"])}else alert("\u8f38\u5165\u932f\u8aa4")}}class r{}var o=e("pMnS"),b=e("oBZk"),a=e("ZZ/e"),h=e("s7LF"),m=e("SVse"),c=e("iInd"),d=t.pb({encapsulation:0,styles:[[""]],data:{}});function g(n){return t.Mb(0,[(n()(),t.rb(0,0,null,null,2,"ion-select-option",[],null,null,null,b.ob,b.F)),t.qb(1,49152,null,0,a.mb,[t.h,t.k,t.x],null,null),(n()(),t.Kb(2,0,[" "," "]))],null,function(n,l){n(l,2,0,l.context.$implicit)})}function f(n){return t.Mb(0,[(n()(),t.rb(0,0,null,null,18,"ion-item",[],null,null,null,b.eb,b.s)),t.qb(1,49152,null,0,a.G,[t.h,t.k,t.x],null,null),(n()(),t.rb(2,0,null,0,6,"ion-input",[["id","ion-input"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],function(n,l,e){var i=!0,u=n.component;return"ionBlur"===l&&(i=!1!==t.Db(n,3)._handleBlurEvent(e.target)&&i),"ionChange"===l&&(i=!1!==t.Db(n,3)._handleInputEvent(e.target)&&i),"ngModelChange"===l&&(i=!1!==(u.members[n.context.index]=e)&&i),i},b.bb,b.r)),t.qb(3,16384,null,0,a.Kb,[t.k],null,null),t.Hb(1024,null,h.c,function(n){return[n]},[a.Kb]),t.qb(5,671744,null,0,h.h,[[8,null],[8,null],[8,null],[6,h.c]],{model:[0,"model"]},{update:"ngModelChange"}),t.Hb(2048,null,h.d,null,[h.h]),t.qb(7,16384,null,0,h.e,[[4,h.d]],null,null),t.qb(8,49152,null,0,a.F,[t.h,t.k,t.x],null,null),(n()(),t.rb(9,0,null,0,9,"ion-select",[["interface","action-sheet"],["mode","md"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"ionBlur"]],function(n,l,e){var i=!0,u=n.component;return"ionBlur"===l&&(i=!1!==t.Db(n,10)._handleBlurEvent(e.target)&&i),"ionChange"===l&&(i=!1!==t.Db(n,10)._handleChangeEvent(e.target)&&i),"ngModelChange"===l&&(i=!1!==(u.members[n.context.index]=e)&&i),"ionChange"===l&&(i=!1!==u.onSelectChange(n.context.index)&&i),i},b.pb,b.E)),t.qb(10,16384,null,0,a.Jb,[t.k],null,null),t.Hb(1024,null,h.c,function(n){return[n]},[a.Jb]),t.qb(12,671744,null,0,h.h,[[8,null],[8,null],[8,null],[6,h.c]],{model:[0,"model"]},{update:"ngModelChange"}),t.Hb(2048,null,h.d,null,[h.h]),t.qb(14,16384,null,0,h.e,[[4,h.d]],null,null),t.qb(15,49152,null,0,a.lb,[t.h,t.k,t.x],{interface:[0,"interface"],interfaceOptions:[1,"interfaceOptions"],mode:[2,"mode"]},null),(n()(),t.gb(16777216,null,0,2,null,g)),t.qb(17,278528,null,0,m.j,[t.M,t.J,t.q],{ngForOf:[0,"ngForOf"]},null),t.Fb(0,m.p,[])],function(n,l){var e=l.component;n(l,5,0,e.members[l.context.index]),n(l,12,0,e.members[l.context.index]),n(l,15,0,"action-sheet","customActionSheetOptions","md"),n(l,17,0,t.Lb(l,17,0,t.Db(l,18).transform(e.member_select_options[l.context.index],1)))},function(n,l){n(l,2,0,t.Db(l,7).ngClassUntouched,t.Db(l,7).ngClassTouched,t.Db(l,7).ngClassPristine,t.Db(l,7).ngClassDirty,t.Db(l,7).ngClassValid,t.Db(l,7).ngClassInvalid,t.Db(l,7).ngClassPending),n(l,9,0,t.Db(l,14).ngClassUntouched,t.Db(l,14).ngClassTouched,t.Db(l,14).ngClassPristine,t.Db(l,14).ngClassDirty,t.Db(l,14).ngClassValid,t.Db(l,14).ngClassInvalid,t.Db(l,14).ngClassPending)})}function p(n){return t.Mb(0,[(n()(),t.rb(0,0,null,null,10,"ion-header",[],null,null,null,b.X,b.n)),t.qb(1,49152,null,0,a.A,[t.h,t.k,t.x],null,null),(n()(),t.rb(2,0,null,0,8,"ion-toolbar",[["color","primary"]],null,null,null,b.tb,b.J)),t.qb(3,49152,null,0,a.Ab,[t.h,t.k,t.x],{color:[0,"color"]},null),(n()(),t.rb(4,0,null,0,3,"ion-buttons",[["slot","start"]],null,null,null,b.N,b.d)),t.qb(5,49152,null,0,a.k,[t.h,t.k,t.x],null,null),(n()(),t.rb(6,0,null,0,1,"ion-menu-button",[],null,null,null,b.ib,b.z)),t.qb(7,49152,null,0,a.Q,[t.h,t.k,t.x],null,null),(n()(),t.rb(8,0,null,0,2,"ion-title",[],null,null,null,b.sb,b.I)),t.qb(9,49152,null,0,a.yb,[t.h,t.k,t.x],null,null),(n()(),t.Kb(-1,0,[" \u4fee\u6539\u73ed\u8868 "])),(n()(),t.rb(11,0,null,null,11,"ion-content",[],null,null,null,b.U,b.k)),t.qb(12,49152,null,0,a.t,[t.h,t.k,t.x],null,null),(n()(),t.rb(13,0,null,0,2,"ion-item",[],null,null,null,b.eb,b.s)),t.qb(14,49152,null,0,a.G,[t.h,t.k,t.x],null,null),(n()(),t.Kb(15,0,[" "," "," "," "])),(n()(),t.rb(16,0,null,0,3,"ion-list",[],null,null,null,b.hb,b.w)),t.qb(17,49152,null,0,a.N,[t.h,t.k,t.x],null,null),(n()(),t.gb(16777216,null,0,1,null,f)),t.qb(19,278528,null,0,m.j,[t.M,t.J,t.q],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(n()(),t.rb(20,0,null,0,2,"ion-button",[],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.edit()&&t),t},b.M,b.c)),t.qb(21,49152,null,0,a.j,[t.h,t.k,t.x],null,null),(n()(),t.Kb(-1,0,[" \u78ba\u8a8d\u4fee\u6539 "]))],function(n,l){var e=l.component;n(l,3,0,"primary"),n(l,19,0,e.members,e.trackByIndex)},function(n,l){var e=l.component;n(l,15,0,e.date,e.shift_title,e.site)})}function v(n){return t.Mb(0,[(n()(),t.rb(0,0,null,null,1,"app-shift-editor",[],null,null,null,p,d)),t.qb(1,114688,null,0,s,[c.a,c.m,i.a,u.a],null,null)],function(n,l){n(l,1,0)},null)}var C=t.nb("app-shift-editor",s,v,{},{},[]);e.d(l,"ShiftEditorPageModuleNgFactory",function(){return x});var x=t.ob(r,[],function(n){return t.Ab([t.Bb(512,t.j,t.Z,[[8,[o.a,C]],[3,t.j],t.v]),t.Bb(4608,m.m,m.l,[t.s,[2,m.t]]),t.Bb(4608,h.j,h.j,[]),t.Bb(4608,a.b,a.b,[t.x,t.g]),t.Bb(4608,a.Eb,a.Eb,[a.b,t.j,t.p]),t.Bb(4608,a.Hb,a.Hb,[a.b,t.j,t.p]),t.Bb(1073742336,m.b,m.b,[]),t.Bb(1073742336,h.i,h.i,[]),t.Bb(1073742336,h.b,h.b,[]),t.Bb(1073742336,a.Cb,a.Cb,[]),t.Bb(1073742336,c.o,c.o,[[2,c.t],[2,c.m]]),t.Bb(1073742336,r,r,[]),t.Bb(1024,c.k,function(){return[[{path:"",component:s}]]},[])])})}}]);